{
	"name": "Homelab - Ansible Common Roles",
	"image": "mcr.microsoft.com/devcontainers/base:jammy",

	"features": {
		"ghcr.io/devcontainers/features/python:1": {
			"version": "3.11"
		},
		"ghcr.io/devcontainers/features/github-cli:1": {}
	},

	"customizations": {
		"vscode": {
			"extensions": [
				"streetsidesoftware.code-spell-checker",
				"github.vscode-github-actions",
				"VisualStudioExptTeam.vscodeintellicode",
				"VisualStudioExptTeam.intellicode-api-usage-examples",
				"redhat.ansible"
			]
		}
	},

	"remoteUser": "vscode",

	"remoteEnv": {
		"USER_UID": "${localEnv:UID:1000}",
		"USER_GID": "${localEnv:GID:1000}"
	},

	"mounts": [
		"type=bind,source=${localEnv:HOME}/.ssh,target=/home/vscode/.ssh,readonly"
	],

	"postCreateCommand": "sudo apt-get update && sudo apt-get install -y libonig-dev build-essential && pip3 install uv && uv sync",

	"runArgs": ["--network=host"]
}
